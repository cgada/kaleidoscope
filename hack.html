<!DOCTYPE HTML>
<html>
    <head>
        <title>StarterHacks 2018</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="css/landing.css" />
        <svg
  xmlns="http://www.w3.org/2000/svg"
  version="1.1">
  <defs>
    <filter id="protanopia">
      <feColorMatrix
        in="SourceGraphic"
        type="matrix"
        values="0.567, 0.433, 0,     0, 0
                0.558, 0.442, 0,     0, 0
                0,     0.242, 0.758, 0, 0
                0,     0,     0,     1, 0"/>
    </filter>
    <filter id="protanomaly">
      <feColorMatrix
        in="SourceGraphic"
        type="matrix"
        values="0.817, 0.183, 0,     0, 0
                0.333, 0.667, 0,     0, 0
                0,     0.125, 0.875, 0, 0
                0,     0,     0,     1, 0"/>
    </filter>
    <filter id="deuteranopia">
      <feColorMatrix
        in="SourceGraphic"
        type="matrix"
        values="0.625, 0.375, 0,   0, 0
                0.7,   0.3,   0,   0, 0
                0,     0.3,   0.7, 0, 0
                0,     0,     0,   1, 0"/>
    </filter>
    <filter id="deuteranomaly">
      <feColorMatrix
        in="SourceGraphic"
        type="matrix"
        values="0.8,   0.2,   0,     0, 0
                0.258, 0.742, 0,     0, 0
                0,     0.142, 0.858, 0, 0
                0,     0,     0,     1, 0"/>
    </filter>
    <filter id="tritanopia">
      <feColorMatrix
        in="SourceGraphic"
        type="matrix"
        values="0.95, 0.05,  0,     0, 0
                0,    0.433, 0.567, 0, 0
                0,    0.475, 0.525, 0, 0
                0,    0,     0,     1, 0"/>
    </filter>
    <filter id="tritanomaly">
      <feColorMatrix
        in="SourceGraphic"
        type="matrix"
        values="0.967, 0.033, 0,     0, 0
                0,     0.733, 0.267, 0, 0
                0,     0.183, 0.817, 0, 0
                0,     0,     0,     1, 0"/>
    </filter>
    <filter id="achromatopsia">
      <feColorMatrix
        in="SourceGraphic"
        type="matrix"
        values="0.299, 0.587, 0.114, 0, 0
                0.299, 0.587, 0.114, 0, 0
                0.299, 0.587, 0.114, 0, 0
                0,     0,     0,     1, 0"/>
    </filter>
    <filter id="achromatomaly">
      <feColorMatrix
        in="SourceGraphic"
        type="matrix"
        values="0.618, 0.320, 0.062, 0, 0
                0.163, 0.775, 0.062, 0, 0
                0.163, 0.320, 0.516, 0, 0
                0,     0,     0,     1, 0"/>
    </filter>
  </defs>
</svg>
        <style>
          .protanopia {
            -webkit-filter: url('#protanopia');
            filter: url('#protanopia');
          }

          .protanomaly {
            -webkit-filter: url('#protanomaly');
            filter: url('#protanomaly');
          }

          .deuteranopia {
            -webkit-filter: url('#deuteranopia');
            filter: url('#deuteranopia');
          }

          .deuteranomaly {
            -webkit-filter: url('#deuteranomaly');
            filter: url('#deuteranomaly');
          }

          .tritanopia {
            -webkit-filter: url('#tritanopia');
            filter: url('#tritanopia');
          }

          .tritanomaly {
            -webkit-filter: url('#tritanomaly');
            filter: url('#tritanomaly');
          }

          .achromatopsia {
            -webkit-filter: url('#achromatopsia');
            filter: url('#achromatopsia');
          }

          .achromatomaly {
            -webkit-filter: url('#achromatomaly');
            filter: url('#achromatomaly');
          }
        </style>
    </head>
    <body>

        <!-- Wrapper -->
            <div id="wrapper" class="divided">

                <!-- One -->
                <section class="banner style1 orient-left content-align-center image-position-right fullscreen">
                    <div class="content">
                        <!-- <img src="/img/logo.png"> -->
                        <div id="description" style="display:none;">
                        </div>
                        <br>
                        <div class="actions vertical">
                                <select id="selector">
                                    <option value="none" selected="">None</option>
                                    <option value="protanomaly">Protanomaly</option>
                                    <option value="protanopia">Protanopia</option>
                                    <option value="deuteranomaly">Deuteranomaly</option>
                                    <option value="deuteranopia">Deuteranopia</option>
                                    <option value="tritanomaly">Tritanomaly</option>
                                    <option value="tritanopia">Tritanopia</option>
                                    <option value="achromatomaly">Achromatomaly</option>
                                    <option value="achromatopsia">Achromatopsia</option>
                                </select>
                            </div>
                        <br>
                        <div class="actions vertical">
                            <button id="switch_camera" class="button big wide smooth-scroll-middle">Switch Camera</button>
                        </div>
                    </div>
                    <div class="" id="preview-div">
                        <video id="preview" playsinline="" autoplay="" muted=""></video>
                    </div>
                </section>
            </div>


        <!-- Scripts -->
            <script src="js/jquery.min.js"></script>
            <script src="js/instascan.min.js"></script>
            <script type="text/javascript">
                var descriptions = {
                  "protanopia": "A reduced sensitivity to red light due to missing L-cones (or long wave cones) is known as protanopia",
                  "protanomaly": "A reduced sensitivity to red light due to defective L-cones (or long wave cones) is known as protanopia",
                  "deuteranopia": " A reduced sensitivity to green light due to missing M-waves (or medium wave cones) is known as deuteranopia",
                  "deuteranomaly": " A reduced sensitivity to green light due to defective M-waves (or medium wave cones) is known as deuteranomaly",
                  "tritanopia": "The absence of s-cones (or shortwave cones) is a condition called Tritanopia. It alters the ability to distinguish some blues from greens and some yellows from violet",
                  "tritanomaly": "The presence of weakened s-cones (or shortwave cones) is a condition called Tritanopia. It alters the ability to distinguish some blues from greens and some yellows from violet",
                  "achromatopsia": "There are some who can not see any color at allâ€“to them the world is a black and white movie. This is known as monochromacy or achromatopsia and is due to non-functioning or absent retinal cones",
                  "achromatomaly": "Achromatomaly occurs due to non-functioning or absent retinal cones and results in the person not being able to see almost no colors",
                };
                var current_identifier = "";
                var current_camera;
                let opts = {
                    continuous: true,
                    video: document.getElementById('preview'),
                    mirror: false
                }
                let scanner = new Instascan.Scanner(opts);
                Instascan.Camera.getCameras().then(function (cameras) {
                    if (cameras.length > 1) {
                      current_camera = 1;
                      scanner.start(cameras[1]);
                    } else if (cameras.length > 0) {
                      current_camera = 0;
                      scanner.start(cameras[0]);
                    } else {
                      console.error('No cameras found.');
                    }
                }).catch(function (e) {
                    console.error(e);
                });

                $("#selector").change(function() {
                    var selectedVal = $(this).find(':selected').val();
                    $("#preview-div").attr("class", selectedVal);
                    $("#description").show();
                    $("#description").text(descriptions[selectedVal] || "");
                });

                $("#switch_camera").click(function() {
                    Instascan.Camera.getCameras().then(function (cameras) {
                    if (cameras.length > 1) {
                        current_camera += 1;
                        scanner.stop().then(function () {
                            scanner.start(cameras[current_camera % cameras.length]);
                        })
                    }
                    }).catch(function (e) {
                        console.error(e);
                    });
                });

            </script>
    </body>
</html>
